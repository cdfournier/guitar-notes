<!DOCTYPE html>
<html lang="en">

  <head>
    <title>
      <%= title %>
    </title>
    <%- include('includes/head', { title }); %>
  </head>

  <body class="hidden">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TF6BNKF"
              height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header>
      <h1>Welcome to <%= title %>
      </h1>
      <button type="button" class="filter-toggle" data-filter-open>
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-filter-2">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 6h16" />
            <path d="M6 12h12" />
            <path d="M9 18h6" />
          </svg>
        </span>
        <span class="text">Filters</span>
      </button>
      <a href="<%= basePath %>/show/" class="setlist-show-toggle is-hidden" data-setlist-show-toggle aria-label="Show setlist builder" aria-hidden="true" tabindex="-1">
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-playlist">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M11 17a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
            <path d="M17 17v-13h4" />
            <path d="M13 5h-10" />
            <path d="M3 9l10 0" />
            <path d="M9 13h-6" />
          </svg>
        </span>
        <span class="setlist-count-pill" data-setlist-count>0</span>
      </a>
    </header>
    <div class="filter" data-filter aria-hidden="true">
      <div class="overlay" data-filter-close></div>
      <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="filter-title">
        <div class="header">
          <h2>Filter Songs</h2>
          <button type="button" class="filter--close" data-filter-close aria-label="Close filters">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-x">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M18 6l-12 12" />
              <path d="M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="filters" data-filter-panel>
          <label class="filter-field">
            <span class="label">Search</span>
            <input type="text" id="song-filter-search" placeholder="Search songs or artists" title="Search">
          </label>
          <div class="filter-row">
            <div id="tag-filters" class="filter-tags" aria-label="Filter by tag"></div>
          </div>
          <div class="filter-actions">
            <button type="button" id="song-filter-reset" class="clear-search" title="Reset filters">Reset</button>
            <button type="button" class="filter-apply" data-filter-close>Done</button>
          </div>
        </div>
      </div>
    </div>
    </div>
    <main id="content" class="index">
      <div style="display: none;" id="clock" class="clock" onload="showTime()" aria-live="polite"></div>
      <article>
        <h2 class="visuallyhidden">
          <%= title %> Index
        </h2>
        <section>
          <h2>Current list:</h2>
          <!-- <small>* denotes a work in progress</small> -->
          <ul id="list">
            <% groups.forEach(function (group) { %>
              <li data-artist-group data-artist="<%= group.artist %>">
                <input type="checkbox" name="<%= group.id %>" id="<%= group.id %>">
                <a href="#"><label for="<%= group.id %>"><span class="image"><img src="<%= basePath %>/assets/images/<%= group.img %>" alt="<%= group.artist %>"></span><span class="performer">
                      <%= group.artist %>
                    </span></label></a>
                <section>
                  <h4 class="visuallyhidden">
                    <%= group.artist %>
                  </h4>
                  <% group.songs.forEach(function (song) { %>
                    <p data-song-item data-artist="<%= song.artist %>" data-title="<%= song.song %>" data-tags="<%= song.tags || "" %>">
                      <span class="song-link-row">
                        <button type="button" class="setlist-add-button" data-setlist-add data-setlist-slug="<%= song['artist-song'] %>" data-setlist-title="<%= song.song %>" data-setlist-artist="<%= song.artist %>" data-setlist-href="<%= basePath %>/songs/<%= song['artist-song'] %>/?lab=1" aria-label="Add to setlist">
                          <span class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-music-plus">
                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                              <path d="M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" />
                              <path d="M9 17v-13h10v8" />
                              <path d="M9 8h10" />
                              <path d="M16 19h6" />
                              <path d="M19 16v6" />
                            </svg>
                          </span>
                        </button>
                        <a href="<%= basePath %>/songs/<%= song['artist-song'] %>/?lab=1" target="_blank" rel="noopener noreferrer">
                          <span class="song">
                            <%= song.song %>
                          </span>
                          <span class="album">
                            <%= song.album %>
                          </span>
                          <% if (song.new) { %><span class="badge">new</span>
                            <% } %>
                        </a>
                      </span>
                    </p>
                    <% }) %>
                </section>
              </li>
              <% }) %>
          </ul>
        </section>
      </article>
    </main>
    <%- include('includes/setlist-tracker-controls'); %>
    <footer>
      <%- include('includes/footer-about'); %>
    </footer>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="<%= basePath %>/assets/js/site.js"></script>
    <script src="<%= basePath %>/assets/js/headroom.js"></script>
    <script src="<%= basePath %>/assets/js/filters.js"></script>
    <script>
      // CHANGE CSS WHEN PAGE LOADS
      $(document).ready(function () {
        $("body").addClass("visible");
        $("body").removeClass("hidden");
      });

      // HEADER HIDE ON SCROLL
      var myElement = document.querySelector("header");
      var headroom = new Headroom(myElement);
      headroom.init();
    </script>
  </body>

</html>
